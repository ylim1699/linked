import"./modulepreload-polyfill-B5Qt9EMX.js";import{a as C,g as y}from"./templates-dQiHFTDc.js";import{c as u}from"./clubs-Ej8KYHwv.js";import{l as v,g as f,a as p,b as m}from"./auth-D8scdDoQ.js";const L="joinedClubs";function E(){const e=f(),t=document.querySelector('a[href="signup.html"]');if(e&&t){const n=`
        <div class="profile-menu relative group">
        <button class="w-8 h-8 bg-blue-700 text-white rounded-full shadow border border-blue-700 font-semibold text-xs transition flex items-center justify-center cursor-pointer">
        ${e.slice(0,1).toUpperCase()+e.slice(1,2).toUpperCase()}
        </button>
        <div class="absolute right-0 w-48 bg-white border border-gray-200 rounded-lg shadow-xl hidden group-hover:block z-50 profile-dropdown-fixed">
        <div class="py-2">
        <span class="block px-4 py-2 text-sm text-gray-700 font-medium">Hello, ${e}</span>
        <a href="#" id="logout-link" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
        Log Out
        </a>
        </div>
        </div>
        </div>
        `;t.outerHTML=n;const o=document.getElementById("logout-link");o&&o.addEventListener("click",a=>{a.preventDefault(),p()})}}function w(e){let t=m();t.some(s=>s.name===e.name)||(t.push(e),localStorage.setItem(L,JSON.stringify(t)),l(),d())}function b(e){e.stopPropagation();const t=e.target.getAttribute("data-club-name");if(t){const s=u.find(n=>n.name===t);s&&w(s)}}function k(e){const t=document.getElementById("groups-list-container");if(!t)return;const s=m().map(r=>r.name),n=e.filter(r=>!s.includes(r.name));t.innerHTML="";const o=n.reduce((r,c)=>{const i=(c.category||c.name.charAt(0)).toUpperCase();return r[i]||(r[i]=[]),r[i].push(c),r},{});Object.keys(o).sort().forEach((r,c)=>{const i=`
            <h2 class="category-heading ${c>0?"mt-10":""}">
                ${r}
            </h2>
        `,h=`<div class="groups-grid">${o[r].map(g=>C(g).replace('<div class="group-card"',`<div class="group-card" data-club-name="${g.name}"`)).join("")}</div>`;t.innerHTML+=i+h}),H()}const B=()=>{const e=document.getElementById("sort-select");return e?e.value:"az"},I=()=>{const e=document.getElementById("search-input");return e?e.value.toLowerCase():""};function l(){const e=I(),t=B();let n=[...u.filter(o=>o.name.toLowerCase().includes(e)||o.description.toLowerCase().includes(e))];switch(t){case"az":n.sort((o,a)=>o.name.localeCompare(a.name));break;case"members":n.sort((o,a)=>a.members-o.members);break;case"newest":n.sort((o,a)=>{const r=(a.new===!0)-(o.new===!0);return r!==0?r:o.name.localeCompare(a.name)});break}k(n)}function x(e){const t=document.getElementById("club-modal"),s=document.getElementById("modal-content-container"),n=u.find(o=>o.name===e);if(t&&s&&n){const o=m().some(c=>c.name===e);s.innerHTML=y(n,o);const a=document.getElementById("modal-close-button");a&&a.addEventListener("click",d);const r=s.querySelector(".modal-footer .join-button");r&&!o&&r.addEventListener("click",b),t.classList.remove("hidden"),document.body.style.overflow="hidden"}}function d(){const e=document.getElementById("club-modal");e&&(e.classList.add("hidden"),document.body.style.overflow="")}function H(){document.querySelectorAll(".group-card").forEach(t=>{const s=t.getAttribute("data-club-name");if(s){t.addEventListener("click",o=>{o.target.closest(".join-button")||o.target.closest(".external-link-button")||x(s)});const n=t.querySelector(".card-footer .join-button");n&&!n.hasAttribute("disabled")&&n.addEventListener("click",b)}})}document.addEventListener("DOMContentLoaded",()=>{E(),l();const e=document.getElementById("sort-select");e&&e.addEventListener("change",l);const t=document.getElementById("search-input");t&&t.addEventListener("input",l);const s=document.getElementById("modal-close-button");s&&s.addEventListener("click",d);const n=document.getElementById("club-modal");n&&n.addEventListener("click",o=>{o.target===n&&d()})});window.logInUser=v;window.getCurrentUser=f;window.logOutUser=p;
