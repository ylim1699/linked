import"./modulepreload-polyfill-B5Qt9EMX.js";import{l as k,g as L,a as M,b as w}from"./auth-D8scdDoQ.js";import{c as x}from"./clubs-Ej8KYHwv.js";function C(){const t=L(),n=document.querySelector('a[href="signup.html"]');if(!n)return;const d=document.querySelector(".profile-menu");if(d&&d.remove(),n.style.display="flex",t){n.style.display="none";const a=`
        <div class="profile-menu relative group">
        <button class="w-8 h-8 bg-blue-700 text-white rounded-full shadow border border-blue-700 font-semibold text-xs transition flex items-center justify-center cursor-pointer">
        ${t.slice(0,1).toUpperCase()+t.slice(1,2).toUpperCase()}
        </button>
        <div class="absolute right-0 w-48 bg-white border border-gray-200 rounded-lg shadow-xl hidden group-hover:block z-50 profile-dropdown-fixed">
        <div class="py-2">
        <span class="block px-4 py-2 text-sm text-gray-700 font-medium">Hello, ${t}</span>
        <a href="#" id="logout-link" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
        Log Out
        </a>
        </div>
        </div>
        </div>
        `;n.insertAdjacentHTML("afterend",a);const r=document.getElementById("logout-link");r&&r.addEventListener("click",i=>{i.preventDefault(),M()})}}function S(){const t=w(),n={};return t.forEach(d=>{const s=x.find(a=>a.name===d.name);s&&s.events&&s.events.forEach(a=>{const r=a.date.split("-");let[i,o,e]=r.map(y=>parseInt(y,10));const u=String(i).padStart(2,"0"),p=String(o).padStart(2,"0"),c=`${e}-${u}-${p}`;n[c]||(n[c]=[]),n[c].push({clubName:s.name,eventName:a.name,link:a.link})})}),n}let D=new Date,m=D.getFullYear(),l=D.getMonth();function h(){const t=document.getElementById("event-modal");t&&(t.classList.add("hidden"),document.body.style.overflow="",document.querySelectorAll(".calendar-day").forEach(n=>{n.classList.remove("selected")}))}function E(t,n){const d=document.getElementById("event-modal"),s=document.getElementById("events-title"),a=document.getElementById("events-list");if(!d||!s||!a)return;document.querySelectorAll(".calendar-day").forEach(e=>{e.classList.remove("selected")});const r=document.querySelector(`.calendar-day[data-date="${t}"]`);r&&r.classList.add("selected");const i={weekday:"long",month:"long",day:"numeric",year:"numeric"},o=new Date(t+"T00:00:00").toLocaleDateString(void 0,i);s.textContent=`Events on ${o}`,a.innerHTML="",n.length===0?a.innerHTML='<p class="no-events-message">No scheduled events from your joined groups for this day.</p>':n.forEach(e=>{const u=document.createElement("div");u.classList.add("event-item");const p=`
                <p class="event-club-name">${e.clubName}</p>
                <p class="font-semibold text-lg">${e.eventName}</p>
                <a href="${e.link}" target="_blank" class="event-link">View Event Details &rarr;</a>
            `;u.innerHTML=p,a.appendChild(u)}),d.classList.remove("hidden"),document.body.style.overflow="hidden"}function v(){const t=document.querySelector(".calendar-grid"),n=document.getElementById("currentMonthYear");if(!t||!n)return;h();const d=S();t.innerHTML="";const s=["January","February","March","April","May","June","July","August","September","October","November","December"];["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].forEach(o=>{const e=document.createElement("div");e.classList.add("day-label"),e.textContent=o,t.appendChild(e)}),n.textContent=`${s[l]} ${m}`;const r=new Date(m,l,1).getDay(),i=new Date(m,l+1,0).getDate();for(let o=0;o<r;o++){const e=document.createElement("div");e.classList.add("calendar-day","empty"),t.appendChild(e)}for(let o=1;o<=i;o++){const e=document.createElement("div");e.classList.add("calendar-day"),e.textContent=o;const u=String(l+1).padStart(2,"0"),p=String(o).padStart(2,"0"),c=`${m}-${u}-${p}`;e.dataset.date=c;const y=d[c],b=y&&y.length>0;if(b){e.classList.add("has-events");const g=document.createElement("div");g.classList.add("event-marker"),g.textContent=b?y.length:"",e.appendChild(g),e.addEventListener("click",()=>E(c,y))}else e.addEventListener("click",()=>E(c,[]));const f=new Date;m===f.getFullYear()&&l===f.getMonth()&&o===f.getDate()&&e.classList.add("today"),t.appendChild(e)}}document.addEventListener("DOMContentLoaded",()=>{C();const t=document.getElementById("prevMonth"),n=document.getElementById("nextMonth"),d=document.getElementById("event-modal"),s=document.getElementById("modal-close-button");v(),t.addEventListener("click",()=>{l--,l<0&&(l=11,m--),v()}),n.addEventListener("click",()=>{l++,l>11&&(l=0,m++),v()}),s&&s.addEventListener("click",h),d&&d.addEventListener("click",a=>{a.target===d&&h()})});window.logInUser=k;window.getCurrentUser=L;window.logOutUser=M;
